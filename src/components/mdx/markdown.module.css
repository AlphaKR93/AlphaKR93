@reference "tailwindcss";

@utility heading-border {
  @apply border-b border-zinc-300 dark:border-zinc-700;
}

.markdown {
  @apply @container;

  h1 {
    @apply mb-1 text-3xl font-semibold;
    margin-top: calc(var(--spacing) * 6);
  }

  h2 {
    @apply pb-1.5 mb-6 text-2xl font-medium;
    margin-top: calc(var(--spacing) * 5.5);
  }

  h3 {
    @apply pb-1 mb-4 text-xl font-medium;
    margin-top: calc(var(--spacing) * 5);
  }

  h4 {
    @apply pb-0.5 mb-1 text-lg font-medium;
    margin-top: calc(var(--spacing) * 4.5);
  }

  h5 {
    @apply mb-0.5 text-base font-medium;
    margin-top: calc(var(--spacing) * 4);
  }

  h6 {
    @apply text-sm;
  }

  div.anchor {
    @apply hidden;
  }

  hr {
    @apply mx-2 my-4 border border-zinc-300 dark:border-zinc-700;
  }

  ul {
    /* unordered list */
    @apply list-disc ml-6;

    &[data-type="*"] {
      list-style-type: disc;
    }

    &[data-type="-"] {
      list-style-type: circle;
    }

    &[data-type="+"] {
      list-style-type: square;
    }
  }

  ol {
    /* ordered list */
    @apply list-decimal ml-6;

    &[data-type="1"] {
      list-style-type: decimal;
    }

    &[data-type="01"] {
      list-style-type: decimal-leading-zero;
    }

    &[data-type="I"] {
      list-style-type: upper-roman;
    }

    &[data-type="i"] {
      list-style-type: lower-roman;
    }

    &[data-type="A"] {
      list-style-type: upper-latin;
    }

    &[data-type="a"] {
      list-style-type: lower-latin;
    }
  }

  ul, ol {
    li {
      input {
        @apply mr-2 align-middle;
      }
    }
  }

  dl {
    dt {
      @apply font-semibold;
    }

    dl {
      /* Content */
    }
  }

  p {
    /* paragraph */
  }

  details {
    summary {
      @apply cursor-pointer;

      h2, h3, h4, h5, h6, p {
        @apply inline border-b-0 mb-0 pb-0;
      }
    }
  }

  blockquote {
    @apply border-l-4 border-zinc-300 dark:border-zinc-700 pl-4 py-2 my-4;

    p {
      @apply mt-0!;
    }
  }

  .table {
    @apply max-w-full overflow-x-auto;

    table {
      thead {
        tr {
          th {
            @apply px-2 py-1 bg-zinc-200 dark:bg-zinc-800;

            p {
              @apply min-w-max bg-transparent!; /* FIXME: PostCSS/LightningCSS error: unknown background color */
            }
          }

          th:nth-child(1) {
            @apply rounded-l-lg;
          }

          th:nth-last-child(1) {
            @apply rounded-r-lg;
          }
        }
      }

      tbody {
        tr {
          td {
            @apply border-r border-b dark:border-r-zinc-900 dark:border-b-zinc-700 px-2 py-1.5;

            &:nth-last-child(1) {
              @apply border-r-0;
            }
          }

          &:nth-last-child(1) td {
            @apply border-b-0;
          }
        }
      }
    }
  }

  .tiles {
    table {

    }
  }

  .cards {
    table {
      @apply w-full;

      thead {
        @apply hidden;
      }

      tbody {
        @apply grid w-full gap-2 @md:grid-cols-2 @3xl:grid-cols-3 @5xl:grid-cols-4;

        tr {
          @apply flex flex-col border border-zinc-300 dark:border-zinc-800 rounded-xl px-3 py-2;

          td:nth-child(1) {
            @apply mb-1;
          }

          td:not(:nth-child(1)) {
            @apply text-sm text-zinc-500 dark:text-zinc-400;
          }
        }
      }
    }
  }

  h2, h3, h4 {
    @apply heading-border;

    &[id]::after {
      @apply text-sm text-zinc-400 dark:text-zinc-500 cursor-pointer px-1;
      content: "Â¶";
    }
  }

  h2, h3, h4, h5, h6, p {
    a:not(:has(abbr)) {
      /* hyperlink */
      @apply text-blue-600 dark:text-blue-400 hover:underline;
    }

    b {
      /* bold */
      @apply font-semibold;
    }

    i {
      /* italic */
      @apply italic;
    }

    s {
      /* strikethrough */
      @apply line-through;
    }

    u {
      /* underline */
      @apply underline;
    }

    small {
      /* small text */
      @apply text-xs text-zinc-500 dark:text-zinc-400;

      &[data-pos="t"] {
        @apply align-text-top;
      }

      &[data-pos="b"] {
        @apply align-text-bottom;
      }
    }

    em {
      font-weight: 700;
      font-style: inherit;

      em {
        font-weight: 800;

        em {
          font-weight: 900;
        }
      }
    }

    strong {
      /* important */
    }

    code {
      /* inline code */
      @apply bg-zinc-100 dark:bg-zinc-800 rounded-sm px-0.5 mx-0.5 outline outline-zinc-300 dark:outline-zinc-600;
    }

    dfn {
      font-style: inherit;

      /* abbreviation */
      abbr {
        @apply text-amber-600 dark:text-amber-500 cursor-pointer hover:underline;
        text-decoration: inherit;
      }
    }

    a abbr {
      /* abbreviation reference */
      @apply underline underline-offset-4 decoration-dotted! decoration-zinc-700 dark:decoration-zinc-400;
    }

    .icon {
      @apply inline-block align-middle -mt-1;
    }

    .badge {
      @apply -mt-0.5 mb-0.5 inline-flex items-center align-middle font-medium -tracking-[.1px] select-none;

      svg {
        @apply shrink-0;
      }

      &:not([data-xs="true"]) {
        @apply rounded-lg px-2.25 py-0.75 text-sm gap-1;

        span {
          @apply -mb-0.5;
        }
      }

      &[data-xs="true"] {
        @apply rounded-md px-1.75 py-0.75 text-xs gap-1;

        span {
          @apply -mb-px;
        }
      }

      &[data-pill="true"] {
        @apply rounded-full px-3;
      }

      &[data-stroke="true"] {
        @apply outline -outline-offset-1;
      }

      &[data-color="red"] {
        @apply bg-red-100 outline-red-700/30 text-red-800;
      }
      &[data-color="orange"] {
        @apply bg-orange-100 outline-orange-700/30 text-orange-800;
      }
      &[data-color="amber"] {
        @apply bg-amber-100 outline-amber-700/30 text-amber-800;
      }
      &[data-color="yellow"] {
        @apply bg-yellow-100 outline-yellow-700/30 text-yellow-800;
      }
      &[data-color="lime"] {
        @apply bg-lime-100 outline-lime-700/30 text-lime-800;
      }
      &[data-color="green"] {
        @apply bg-green-100 outline-green-700/30 text-green-800;
      }
      &[data-color="emerald"] {
        @apply bg-emerald-100 outline-emerald-700/30 text-emerald-800;
      }
      &[data-color="teal"] {
        @apply bg-teal-100 outline-teal-700/30 text-teal-800;
      }
      &[data-color="cyan"] {
        @apply bg-cyan-100 outline-cyan-700/30 text-cyan-800;
      }
      &[data-color="sky"] {
        @apply bg-sky-100 outline-sky-700/30 text-sky-800;
      }
      &[data-color="blue"] {
        @apply bg-blue-100 outline-blue-700/30 text-blue-800;
      }
      &[data-color="indigo"] {
        @apply bg-indigo-100 outline-indigo-700/30 text-indigo-800;
      }
      &[data-color="violet"] {
        @apply bg-violet-100 outline-violet-700/30 text-violet-800;
      }
      &[data-color="purple"] {
        @apply bg-purple-100 outline-purple-700/30 text-purple-800;
      }
      &[data-color="fuchsia"] {
        @apply bg-fuchsia-100 outline-fuchsia-700/30 text-fuchsia-800;
      }
      &[data-color="pink"] {
        @apply bg-pink-100 outline-pink-700/30 text-pink-800;
      }
      &[data-color="rose"] {
        @apply bg-rose-100 outline-rose-700/30 text-rose-800;
      }
      &[data-color="slate"] {
        @apply bg-slate-100 outline-slate-700/30 text-slate-800;
      }
      &[data-color="gray"] {
        @apply bg-gray-100 outline-gray-700/30 text-gray-800;
      }
      &[data-color="zinc"] {
        @apply bg-zinc-100 outline-zinc-700/30 text-zinc-800;
      }
      &[data-color="neutral"] {
        @apply bg-neutral-100 outline-neutral-700/30 text-neutral-800;
      }
      &[data-color="stone"] {
        @apply bg-stone-100 outline-stone-700/30 text-stone-800;
      }
    }

    span.spoiler {
      @apply opacity-0 hover:opacity-100;
    }
  }

  pre {
    @apply select-text overflow-x-auto;

    code {
      &[data-temp="true"] span {
        @apply block;
      }
    }

    samp {
      &[data-temp="true"] span {
        @apply block;
      }
    }
  }

  h2, h3, h4, h5, h6, details, pre, p {
    & + & {
      @apply mt-4;
    }
  }
}
